{% extends "sacrud/redefineme.jinja2" %}

{% block sa_body %}
	<div class="page">
		{% include 'sacrud/forms/list.jinja2' with context %}

		<div class="sacrud-grid">
			<div class="sacrud-grid__title">
				{{ sa_crud['table'].__tablename__ }} administration
			</div>
			<div class="sacrud-grid__action" id="sa_grid_action">
				<a href="#" class="k-button k-primary">
					Add a new #
				</a>
			</div>
			<div class="sacrud-grid-content">
				<div id="sacrud-grid"></div>
			</div>
		</div>
	</div>
{% endblock %}

{% block extrascript %}
	<script>
		$(document).ready(function() {
			$("#sacrud-grid").kendoGrid({
				dataSource: {
					transport: {
						read:  {
							url: '',
							data: {json: 'on'},
							dataType: 'json'
						}
					}
				},
				scrollable: false,
				selectable: "multiple",
				sortable: true,
				pageable: {
					refresh: true,
					pageSizes: true,
					pageSize: 20,
					buttonCount: 5
				},
				columnMenu: true,
        columns: [
          {% for col in sa_crud['col'] %}
            {
              field: "{% if hasattr(col, 'instance_name') %}{{ col.instance_name }}{% else %}{{ col.name }}{% endif %}",
              title: "{{ col.info.verbose_name or col.name }}"
            },
          {% endfor %}
        ],
				// toolbar: [
				//     'create',
				//     'save',
				//     'cancel',
				//     'refresh',
				// ],
			});

		});
	</script>

{% endblock %}
